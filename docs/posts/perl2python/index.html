<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <title>Perl to Python - Notes</title>
  <meta property="og:title" content="Perl to Python - Notes" />
  <meta name="twitter:title" content="Perl to Python - Notes" />
  <meta name="description" content="Going from Perl to Python &hellip;
Data structures Both languages are dynamic so you can mix types in data structures (data containers).
Perl Python Example Note ---- ------ ------- ----- array list [ 1, 3.4, &#39;hello&#39; ] you can mix types list tuple ( 10, 20, 30 ) immutable, parens are optional hash dictionary { &#39;a&#39;: 3, &#39;b&#39;: 42 } have to quote strings in Python n/a set set( [1, 2, 3] ) can be faked with hash in Perl In lists/tuples the comma is the operator.">
  <meta property="og:description" content="Going from Perl to Python &hellip;
Data structures Both languages are dynamic so you can mix types in data structures (data containers).
Perl Python Example Note ---- ------ ------- ----- array list [ 1, 3.4, &#39;hello&#39; ] you can mix types list tuple ( 10, 20, 30 ) immutable, parens are optional hash dictionary { &#39;a&#39;: 3, &#39;b&#39;: 42 } have to quote strings in Python n/a set set( [1, 2, 3] ) can be faked with hash in Perl In lists/tuples the comma is the operator.">
  <meta name="twitter:description" content="Going from Perl to Python &hellip;
Data structures Both languages are dynamic so you can mix types in data structures (data containers).
Perl Python Example Note ---- ------ ------- ----- array list [ â€¦">
  <meta name="author" content="Jozef Reisinger"/>
  <meta property="og:site_name" content="Notes" />
  <meta property="og:url" content="https://jreisinger.github.io/posts/perl2python/" />
  <meta property="og:type" content="article" />
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.46" />
  <link rel="stylesheet" href="https://jreisinger.github.io/notes/css/style.css" media="all" />
  <link rel="stylesheet" href="https://jreisinger.github.io/notes/css/syntax.css" media="all" />
  <link rel="stylesheet" href="https://jreisinger.github.io/notes/css/custom.css" media="all" />
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.10/js/all.js" integrity="sha384-slN8GvtUJGnv6ca26v8EzVaR9DC58QEwsIk9q1QXdCU8Yu8ck/tL/5szYlBbqmS+" crossorigin="anonymous"></script>
</head>

<body>
<header class="site-header">
  <nav class="site-navi">
    <h1 class="site-title"><a href="https://jreisinger.github.io/notes/">Notes</a></h1>
    <iframe src="https://duckduckgo.com/search.html?site=jreisinger.github.io/notes,github.com/jreisinger/blog&prefill=Search Notes via DDG" style="overflow:hidden;margin:0;padding:0;width:408px;height:40px;" frameborder="0"></iframe>
    <ul class="site-navi-items">
      <li class="site-navi-item-categories"><a href="https://jreisinger.github.io/notes/categories/" title="Categories">Categories</a></li>
      <li class="site-navi-item-tags"><a href="https://jreisinger.github.io/notes/tags/" title="Tags">Tags</a></li>
    </ul>

    
    <ul>
      
        
        
        
        <a href="https://github.com/jreisinger/notes/tree/master/content/posts/perl2python.md">See on GitHub</a>
        
      
    </ul>

  </nav>
</header>
<hr class="site-header-bottom">


  <div class="main" role="main">
    <article class="article">
      
      
      <h1 class="article-title">Perl to Python</h1>
      
      <hr class="article-title-bottom">
      <ul class="article-meta">
        <li class="article-meta-date"><time>January 11, 2016</time></li>
        <li class="article-meta-categories">
          <a href="https://jreisinger.github.io/notes/categories/prog/">
            <i class="fas fa-folder"></i>
            prog
          </a>&nbsp;
        </li>
        <li class="article-meta-tags">
          <a href="https://jreisinger.github.io/notes/tags/perl/">
            <i class="fas fa-tag"></i>
            perl
          </a>&nbsp;
        </li>
        <li class="article-meta-tags">
          <a href="https://jreisinger.github.io/notes/tags/pytho/">
            <i class="fas fa-tag"></i>
            pytho
          </a>&nbsp;
        </li>
      </ul>
      
<aside class="toc">
  <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#data-structures">Data structures</a></li>
<li><a href="#file-i-o">File I/O</a></li>
<li><a href="#error-handling">Error handling</a></li>
<li><a href="#shortcuts">Shortcuts</a></li>
</ul></li>
</ul>
</nav>
</aside>
      

<p>Going from Perl to Python &hellip;</p>

<h2 id="data-structures">Data structures</h2>

<p>Both languages are dynamic so you can mix types in data structures (data
containers).</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">Perl   Python       Example              Note
----   ------       -------              -----
array  list         [ 1, 3.4, &#39;hello&#39; ]  you can mix types
list   tuple        ( 10, 20, 30 )       immutable, parens are optional
hash   dictionary   { &#39;a&#39;: 3, &#39;b&#39;: 42 }  have to quote strings in Python
n/a    set          set( [1, 2, 3] )     can be faked with hash in Perl</pre></div>
<p>In lists/tuples the comma is the operator. So a one element tuple is <code>( 10, )</code>.</p>

<h2 id="file-i-o">File I/O</h2>

<p>Process every line in a file:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">for line in file(&#39;filename.txt&#39;):  # or open(&#34;filename.txt&#34;)
    print line

# the with keyword closes the file automatically (even when the prog crashes)
with open(&#34;/etc/passwd&#34;) as file_object:
    for line in file_object:
        # print statement adds a newline so we remove it with rstrip()
        print line.rstrip()</pre></div>
<p>Process every line in a file on command line or stdin if no file:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"># Perl
while (&lt;&gt;) { print }

# Python
import fileinput
for line in fileinput.input():
    print line</pre></div>
<p>Access stdin directly:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">import sys
for line in sys.stdin:
    print line</pre></div>
<p>Slurp the whole file/stdin:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"># into a string
contents = file(&#39;filename.txt&#39;).read()
all_input = sys.stdin.read()

# one string per line
list_of_strings = file(&#39;filename.txt&#39;).readlines()
all_input_as_list = sys.stdin.readlines()

with open(&#39;/etc/passwd&#39;) as file_object:
    # read() returns an empty string when it reaches the end of a file
    contents = file_object.read()
    # rstrip() removes the extra blank line added by read()
    print contents.rstrip()</pre></div>
<p>Write to a file:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">f = open(&#34;out&#34;, &#34;w&#34;)
while year &lt;= numyears:
    principal = principal * (1 + rate)
    f.write(&#34;%3d %0.2f&#34; % (year, principal))
    #print &gt;&gt;f, &#34;%3d %0.2f&#34; % (year, principal)
    year += 1
f.close()</pre></div>
<h2 id="error-handling">Error handling</h2>

<p>Errors:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"># Perl...

# Convert string to int, return undef on error
sub convert_number { int $_[0] }
print convert_number $ARGV[0];</pre></div><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"># Python...

# Emulate Perl&#39;s behavior above
import sys

def convert_number(s):
    try:
        return int(s)
    except ValueError:
        return None

print( convert_number(sys.argv[1]) )</pre></div>
<p>Warnings</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"># Perl...

my @filenames = qw(README.md y empty);

for my $file (@filenames) {
    my $fh;
    # C library/sys calls return undef on error and set $!
    unless ( open $fh, $file ) {
        warn &#34;$file: could not be opened: $!\n&#34;;
        next;
    }
    warn &#34;$file: is empty\n&#34; unless readline $fh;
}

# Python...

class EmptyFileError(Exception):
    pass

filenames = [ &#34;README.md&#34;, &#34;y&#34;, &#34;empty&#34; ]

for file in filenames:
    try:
        f = open(file, &#34;r&#34;)
        line = f.readline()
        if line == &#34;&#34;:
            f.close()
            raise EmptyFileError(&#34;%s: is empty&#34; % file)
    except IOError as error:
        print(&#34;%s: could not be opened: %s&#34; % (file, error.strerror))
    except EmptyFileError as error:
        print(error)</pre></div>
<h2 id="shortcuts">Shortcuts</h2>

<p>Mapping</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"># map()
$ perl -le &#39;print join &#34;, &#34;, map ucfirst, @ARGV&#39; jane john jack
Jane, John, Jack

# list comprehension
&gt;&gt;&gt; names = [&#39;jane&#39;, &#39;john&#39;, &#39;jack&#39;]
&gt;&gt;&gt; [ s.capitalize() for s in names ]
[&#39;Jane&#39;, &#39;John&#39;, &#39;Jack&#39;]</pre></div>
<p>Filtering</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"># grep()
$ perl -le &#39;print join &#34;, &#34;, grep $_ eq uc $_, @ARGV&#39; a BC Cd d EF
BC, EF

# list comprehension
&gt;&gt;&gt; strings = [&#39;a&#39;, &#39;BC&#39;, &#39;Cd&#39;, &#39;d&#39;, &#39;EF&#39;]
&gt;&gt;&gt; [ s for s in strings if s.isupper() ]
[&#39;BC&#39;, &#39;EF&#39;]</pre></div>
<p>Generator expression (this time we go from Python to Perl&hellip;)</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&gt;&gt;&gt; g = ( n ** 2 for n in range(5) )
&gt;&gt;&gt; next(g)
0
&gt;&gt;&gt; g.next()
1
$ perl -le &#39;print join &#34;, &#34;, map $_ ** 2, 0 .. 4&#39;
0, 1, 4, 9, 16

&gt;&gt;&gt; sum( n ** 2 for n in range(5) )
30
$ perl -le &#39;$sum += $_ for map $_ ** 2, 0 .. 4; print $sum&#39;
30</pre></div>
<p>More:</p>

<ul>
<li><a href="https://youtu.be/-tdI9RYjZNE">Andrew Grangaard - A perler&rsquo;s Python Primer</a></li>
<li><a href="http://everythingsysadmin.com/perl2python.html">http://everythingsysadmin.com/perl2python.html</a></li>
</ul>

    </article>

    
    <div class="disqus-comments">
      <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "notes-4" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>

    <ul class="pager article-pager">
      <li class="pager-newer">
          <a href="https://jreisinger.github.io/notes/posts/tcpdump/" data-toggle="tooltip" data-placement="top" title="tcpdump">&lt; Newer</a>
      </li>
      <li class="pager-older">
        <a href="https://jreisinger.github.io/notes/posts/signals/" data-toggle="tooltip" data-placement="top" title="Signals">Older &gt;</a>
      </li>
    </ul>
  </div>


<div class="site-footer">
  <div class="copyright"></div>
  <ul class="site-footer-items">
    <li class="site-footer-item-about"><a href="https://jreisinger.github.io/about" title="About">About</a></li>
  </ul>
  <div class="powerdby">
    Powered by <a href="https://gohugo.io/">Hugo</a> and <a href="https://github.com/taikii/whiteplain">Whiteplain</a>
  </div>
</div>
<script src="https://jreisinger.github.io/notes/js/script.js"></script>
<script src="https://jreisinger.github.io/notes/js/custom.js"></script>

<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-124886160-1', 'auto');
	
	ga('send', 'pageview');
}
</script>


</body>
</html>
